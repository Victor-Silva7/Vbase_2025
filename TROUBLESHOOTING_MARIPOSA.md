# ğŸ¯ TROUBLESHOOTING: Por Que A Mariposa Desapareceu?\n\n## ğŸ“‹ Ãrvore de DecisÃ£o\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Mariposa foi salva?           â”‚\nâ””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n     â”‚\n     â”œâ”€ [NÃƒO] \"Deu erro ao salvar?\"\n     â”‚   â””â”€ Procure por: D/FirebaseDB: âŒ Erro\n     â”‚       â”œâ”€ Permission denied â†’ Regras Firebase\n     â”‚       â”œâ”€ Offline â†’ Sem internet\n     â”‚       â””â”€ Invalid data â†’ Dados errados\n     â”‚\n     â””â”€ [SIM] \"Mariposa aparece em SEUS REGISTROS?\"\n         â”‚\n         â”œâ”€ [SIM] âœ… PROBLEMA RESOLVIDO!\n         â”‚\n         â””â”€ [NÃƒO] \"EstÃ¡ no Firebase Console?\"\n             â”‚\n             â”œâ”€ [NÃƒO] âŒ Falha ao salvar\n             â”‚   â””â”€ Veja logs de erro acima\n             â”‚\n             â””â”€ [SIM] \"Qual problema?\"\n                 â”‚\n                 â”œâ”€ [ESTRUTURA ERRADA] (imagens = URIs)\n                 â”‚   â””â”€ Aplicar atualizaÃ§Ã£o de cÃ³digo\n                 â”‚\n                 â”œâ”€ [LISTENER NÃƒO ATIVADO]\n                 â”‚   â””â”€ Force refresh (puxar para baixo)\n                 â”‚\n                 â”œâ”€ [AUTENTICAÃ‡ÃƒO ERRADA]\n                 â”‚   â””â”€ Verificar userId\n                 â”‚\n                 â””â”€ [CONEXÃƒO FRACA]\n                     â””â”€ Reconectar WiFi/dados\n```\n\n---\n\n## ğŸ” Checklist RÃ¡pido (5 minutos)\n\n### âœ… Passo 1: Verifique Firebase\n- [ ] Abra [Firebase Console](https://console.firebase.google.com)\n- [ ] Selecione seu projeto\n- [ ] VÃ¡ em Realtime Database\n- [ ] Procure: `usuarios` â†’ seu-uid â†’ `insetos`\n- [ ] **Mariposa estÃ¡ lÃ¡?**\n\n**Resultado:**\n- âœ… Sim â†’ Ir para Passo 2\n- âŒ NÃ£o â†’ Problema Ã© no salvamento (ir para \"Debug de Salvamento\")\n\n---\n\n### âœ… Passo 2: Verifique Estrutura de Dados\n\nClique na mariposa no Firebase e veja:\n\n```json\n{\n  \"id\": \"insect_1234567890_abcd\",\n  \"nome\": \"Mariposa\",\n  \"categoria\": \"NEUTRAL\",\n  \"imagens\": [\n    \"f47ac10b-58cc-4372-a567-0e02b2c3d479\",  â† UUID?\n    \"e4d3c2b1-9876-5432-1098-abcdef123456\"   â† UUID?\n  ],\n  \"timestamp\": 1699574324000,\n  \"userId\": \"seu-uid-aqui\",\n  \"userName\": \"Seu Nome\"\n}\n```\n\n**Verificar:**\n- [ ] Campo `imagens` tem valores? (nÃ£o vazio)\n- [ ] Valores parecem UUIDs? (xxx-xxx-xxx-xxx)\n- [ ] NÃƒO sÃ£o URLs ou paths?\n\n**Resultado:**\n- âœ… Tudo certo â†’ Ir para Passo 3\n- âŒ UUIDs faltam ou sÃ£o errados â†’ Problema de upload\n\n---\n\n### âœ… Passo 3: Verifique Logs do App\n\n1. Abra Android Studio\n2. VÃ¡ em **Logcat** (inferior)\n3. Digite no filtro: `MeusRegistrosVM` ou `FirebaseDB`\n4. Abra \"SEUS REGISTROS\" no app\n5. **Procure por logs:**\n\n```\nD/FirebaseDB: Attaching listener para: usuarios/xyz/insetos\nD/RegistroRepository: Starting listener para insetos do usuÃ¡rio\nD/MeusRegistrosVM: Combinando registros: 0 plantas + X insetos\n```\n\n**Resultado:**\n- âœ… Todos os logs aparecem â†’ Fluxo ok, mas algo errado\n- âŒ Faltam logs â†’ Listener nÃ£o ativado\n\n---\n\n### âœ… Passo 4: Force Refresh\n\n1. VÃ¡ para \"SEUS REGISTROS\"\n2. **Puxe a lista para baixo** (SwipeRefresh)\n3. Espere 2-3 segundos\n4. Solte\n\n**Resultado:**\n- âœ… Mariposa aparece â†’ **PROBLEMA RESOLVIDO!**\n- âŒ Ainda nÃ£o aparece â†’ PrÃ³ximo passo\n\n---\n\n### âœ… Passo 5: Reinicie o App\n\n1. Feche o app completamente\n2. Espere 5 segundos\n3. Abra novamente\n4. VÃ¡ para \"SEUS REGISTROS\"\n\n**Resultado:**\n- âœ… Mariposa aparece â†’ **PROBLEMA RESOLVIDO!**\n- âŒ Ainda nÃ£o aparece â†’ PrÃ³ximo passo\n\n---\n\n## ğŸ› Debug de Salvamento (Se NÃ£o Estiver No Firebase)\n\nSe a mariposa **NÃƒO aparece no Firebase Console**, o problema Ã© no salvamento.\n\n### Verificar Logs de Erro\n\nAbra Logcat e procure por:\n\n```\nE/ImageUploadManager: âŒ Erro no upload\nE/FirebaseDB: âŒ Erro ao salvar inseto\nE/RegistroRepository: âŒ Erro\n```\n\n**PossÃ­veis Erros:**\n\n| Erro | Causa | SoluÃ§Ã£o |\n|------|-------|----------|\n| `Permission denied` | Sem permissÃ£o no Firebase | Verificar regras de seguranÃ§a |\n| `Network error` | Sem internet | Conectar WiFi/dados |\n| `Auth error` | NÃ£o autenticado | Fazer login novamente |\n| `Invalid data` | Estrutura errada | Verifique tipos de dados |\n| `Storage quota exceeded` | Sem espaÃ§o | Deletar dados antigos |\n\n---\n\n## ğŸ”§ SoluÃ§Ãµes RÃ¡pidas\n\n### SoluÃ§Ã£o 1: Puxe para Recarregar â­ (Tente Primeiro!)\n```\n1. VÃ¡ em \"SEUS REGISTROS\"\n2. Puxe para baixo\n3. Solte\n4. Aguarde 2 segundos\n```\n\n### SoluÃ§Ã£o 2: Feche e Abra\n```\n1. Feche app (Home button â†’ swipe up)\n2. Espere 5 segundos\n3. Abra novamente\n4. VÃ¡ em \"SEUS REGISTROS\"\n```\n\n### SoluÃ§Ã£o 3: Reconecte Internet\n```\n1. Desative WiFi\n2. Espere 3 segundos\n3. Reative WiFi\n4. Tente novamente\n```\n\n### SoluÃ§Ã£o 4: Limpe Cache\n```\n1. ConfiguraÃ§Ãµes â†’ Aplicativos\n2. Procure \"V Group\" ou \"Vbase\"\n3. Clique â†’ Armazenamento\n4. Limpar Cache\n5. Abra app novamente\n```\n\n### SoluÃ§Ã£o 5: Reinstale o App\n```\n1. Desinstale o app\n2. Limpe dados (opcional)\n3. Instale novamente\n4. FaÃ§a login\n5. Teste\n```\n\n---\n\n## ğŸ“ InformaÃ§Ãµes Para DiagnÃ³stico\n\nSe nenhuma soluÃ§Ã£o funcionar, me envie:\n\n1. **Screenshot do Firebase** mostrando se a mariposa estÃ¡ lÃ¡\n2. **Logs do Logcat** (copie-cole a parte relevante)\n3. **Mensagem de erro exata** (se houver)\n4. **Passos que fez** antes da mariposa desaparecer\n5. **Seu ID de usuÃ¡rio** (primeiras 8 caracteres)\n\n---\n\n## âœ… Status de ResoluÃ§Ã£o\n\n- [ ] Mariposa aparece no Firebase Console?\n- [ ] Estrutura de dados estÃ¡ correta?\n- [ ] Logs aparecem no app?\n- [ ] Force refresh resolveu?\n- [ ] Reiniciar o app resolveu?\n\n**Quantos destes estÃ£o marcados: ___ / 5**\n\n---\n\n## ğŸ¯ Resultado Esperado\n\nApÃ³s seguir esses passos, a mariposa deve:\n\nâœ… Aparecer em \"SEUS REGISTROS\"  \nâœ… Mostrar imagem corrretamente  \nâœ… Sincronizar em tempo real  \nâœ… Persistir apÃ³s reiniciar o app  \n\n---\n\n**Quando terminar os testes, me avise qual passo resolveu o problema!** ğŸ‰\n"